/*
** ─────────────────────────────────────────────────────────────────────────────────────────
** ─██████████████─██████████████─██████████████─██████─────────██████████─██████████████───
** ─██░░░░░░░░░░██─██░░░░░░░░░░██─██░░░░░░░░░░██─██░░██─────────██░░░░░░██─██░░░░░░░░░░██───
** ─██░░██████████─██░░██████░░██─██░░██████░░██─██░░██─────────████░░████─██░░██████░░██───
** ─██░░██─────────██░░██──██░░██─██░░██──██░░██─██░░██───────────██░░██───██░░██──██░░██───
** ─██░░██─────────██░░██──██░░██─██░░██──██░░██─██░░██───────────██░░██───██░░██████░░████─
** ─██░░██──██████─██░░██──██░░██─██░░██──██░░██─██░░██───────────██░░██───██░░░░░░░░░░░░██─
** ─██░░██──██░░██─██░░██──██░░██─██░░██──██░░██─██░░██───────────██░░██───██░░████████░░██─
** ─██░░██──██░░██─██░░██──██░░██─██░░██──██░░██─██░░██───────────██░░██───██░░██────██░░██─
** ─██░░██████░░██─██░░██████░░██─██░░██████░░██─██░░██████████─████░░████─██░░████████░░██─
** ─██░░░░░░░░░░██─██░░░░░░░░░░██─██░░░░░░░░░░██─██░░░░░░░░░░██─██░░░░░░██─██░░░░░░░░░░░░██─
** ─██████████████─██████████████─██████████████─██████████████─██████████─████████████████─
*/
#include "goolib-error.h"
#include "goolib-jvm.h"

int 
goo_jvm_java(char** error)
{
  JavaVM* jvm; 
  JNIEnv* env; 
  JavaVMInitArgs vm_args;

  // JavaVMOption options[1];
  // options[0].optionString = "-Xmx512m";
  // vm_args.options        = options;
  vm_args.version               = JNI_VERSION_1_8;
  vm_args.nOptions              = 0;
  vm_args.ignoreUnrecognized    = JNI_FALSE;

  jint rc = JNI_CreateJavaVM(&jvm, (void**)&env, &vm_args);
  if (rc != JNI_OK) 
  {
    *error = goo_error_new("Failed to create Java VM (error code %d)", rc);
    return GOO_ERROR_FAILURE;
  }
  (*jvm)->DestroyJavaVM(jvm);
  return GOO_SUCCESS;
}

int 
goo_jvm_javac(char** error)
{
  return GOO_SUCCESS;
}